<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="

  Iceberg Compatibility
  #

Paimon supports generating Iceberg compatible metadata,
so that Paimon tables can be consumed directly by Iceberg readers.">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://example.org/migration/iceberg-compatibility/">
  <meta property="og:site_name" content="Apache Paimon">
  <meta property="og:title" content="Iceberg Compatibility">
  <meta property="og:description" content="Iceberg Compatibility#Paimon supports generating Iceberg compatible metadata, so that Paimon tables can be consumed directly by Iceberg readers.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="migration">
<title>Iceberg Compatibility | Apache Paimon</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="https://example.org/migration/iceberg-compatibility/">
<link rel="stylesheet" href="/book.min.d5e59cb0aa8d22a5813c62cd5e25d3d172489a369c61dc3f622ee96ae1ebb457.css" integrity="sha256-1eWcsKqNIqWBPGLNXiXT0XJImjacYdw/Yi7pauHrtFc=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.ed8e866478944a5c9bf1b56d57e841c7fe2748afd65915a6f729dd332db70f7b.js" integrity="sha256-7Y6GZHiUSlyb8bVtV&#43;hBx/4nSK/WWRWm9yndMy23D3s=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Apache Paimon</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>















  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0f577c58e9b3dd44e41e0b83e7c5f9ef" class="toggle"  />
    <label for="section-0f577c58e9b3dd44e41e0b83e7c5f9ef" class="flex">
      <a href="/concepts/" class="flex-auto ">Concepts</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/concepts/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/basic-concepts/" class="">Basic Concepts</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/concurrency-control/" class="">Concurrency Control</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/catalog/" class="">Catalog</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-120b07edbd4c34f9ca14c990e6d3a5c1" class="toggle"  />
    <label for="section-120b07edbd4c34f9ca14c990e6d3a5c1" class="flex">
      <a href="/concepts/rest/" class="flex-auto ">RESTCatalog</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/concepts/rest/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/rest/bear/" class="">Bear Token</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/rest/dlf/" class="">DLF Token</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/rest/rest-api/" class="">REST API</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/table-types/" class="">Table Types</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/system-tables/" class="">System Tables</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/data-types/" class="">Data Types</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c7a94b41156194ecee1e09c684d748e5" class="toggle"  />
    <label for="section-c7a94b41156194ecee1e09c684d748e5" class="flex">
      <a href="/concepts/spec/" class="flex-auto ">Specification</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/concepts/spec/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/spec/schema/" class="">Schema</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/spec/snapshot/" class="">Snapshot</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/spec/manifest/" class="">Manifest</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/spec/datafile/" class="">DataFile</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/spec/tableindex/" class="">Table Index</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/concepts/spec/fileindex/" class="">File Index</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c0d9adbd958aa78e9b5cb0511c6abe1b" class="toggle"  />
    <label for="section-c0d9adbd958aa78e9b5cb0511c6abe1b" class="flex">
      <a href="/primary-key-table/" class="flex-auto ">Table with PK</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/primary-key-table/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/primary-key-table/data-distribution/" class="">Data Distribution</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/primary-key-table/table-mode/" class="">Table Mode</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-04d66c05043a350c14fa1d446df94a79" class="toggle"  />
    <label for="section-04d66c05043a350c14fa1d446df94a79" class="flex">
      <a href="/primary-key-table/merge-engine/" class="flex-auto ">Merge Engine</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/primary-key-table/merge-engine/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/primary-key-table/merge-engine/partial-update/" class="">Partial Update</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/primary-key-table/merge-engine/aggregation/" class="">Aggregation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/primary-key-table/merge-engine/first-row/" class="">First Row</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/primary-key-table/changelog-producer/" class="">Changelog Producer</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/primary-key-table/sequence-rowkind/" class="">Sequence &amp; Rowkind</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/primary-key-table/compaction/" class="">Compaction</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/primary-key-table/query-performance/" class="">Query Performance</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7c7495e5c54b216316cbd6cefc4966a1" class="toggle"  />
    <label for="section-7c7495e5c54b216316cbd6cefc4966a1" class="flex">
      <a href="/append-table/" class="flex-auto ">Table w/o PK</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/append-table/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/append-table/streaming/" class="">Streaming</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/append-table/query-performance/" class="">Query Performance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/append-table/update/" class="">Update</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/append-table/bucketed/" class="">Bucketed</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2bc2280284fce30dc9cfe001c4d4f308" class="toggle"  />
    <label for="section-2bc2280284fce30dc9cfe001c4d4f308" class="flex">
      <a href="/flink/" class="flex-auto ">Engine Flink</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/flink/quick-start/" class="">Quick Start</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/flink/sql-ddl/" class="">SQL DDL</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/flink/sql-write/" class="">SQL Write</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/flink/sql-query/" class="">SQL Query</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/flink/consumer-id/" class="">Consumer ID</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/flink/sql-lookup/" class="">SQL Lookup</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/flink/sql-alter/" class="">SQL Alter</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/flink/clone-tables/" class="">Clone Tables</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/flink/procedures/" class="">Procedures</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/flink/action-jars/" class="">Action Jars</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/flink/savepoint/" class="">Savepoint</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-11bc7fef43a73cd8f67282a4f805f959" class="toggle"  />
    <label for="section-11bc7fef43a73cd8f67282a4f805f959" class="flex">
      <a href="/spark/" class="flex-auto ">Engine Spark</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/spark/quick-start/" class="">Quick Start</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/spark/sql-ddl/" class="">SQL DDL</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/spark/sql-functions/" class="">SQL Functions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/spark/sql-write/" class="">SQL Write</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/spark/sql-query/" class="">SQL Query</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/spark/sql-alter/" class="">SQL Alter</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/spark/auxiliary/" class="">Auxiliary</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/spark/procedures/" class="">Procedures</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c279f1a47f0df5c590de69874c1f87c3" class="toggle"  />
    <label for="section-c279f1a47f0df5c590de69874c1f87c3" class="flex">
      <a href="/ecosystem/" class="flex-auto ">Ecosystem</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/ecosystem/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/ecosystem/starrocks/" class="">StarRocks</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/ecosystem/doris/" class="">Doris</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/ecosystem/hive/" class="">Hive</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/ecosystem/trino/" class="">Trino</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/ecosystem/amoro/" class="">Amoro</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e8c1a2c4fbac828568029fe095ebb072" class="toggle"  />
    <label for="section-e8c1a2c4fbac828568029fe095ebb072" class="flex">
      <a href="/cdc-ingestion/" class="flex-auto ">CDC Ingestion</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/cdc-ingestion/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cdc-ingestion/mysql-cdc/" class="">Mysql CDC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cdc-ingestion/postgres-cdc/" class="">Postgres CDC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cdc-ingestion/kafka-cdc/" class="">Kafka CDC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cdc-ingestion/mongo-cdc/" class="">Mongo CDC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cdc-ingestion/pulsar-cdc/" class="">Pulsar CDC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/cdc-ingestion/debezium-bson/" class="">Debezium BSON</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8745d48ca93ee7946abd46b8e0d32417" class="toggle"  />
    <label for="section-8745d48ca93ee7946abd46b8e0d32417" class="flex">
      <a href="/maintenance/" class="flex-auto ">Maintenance</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/maintenance/filesystems/" class="">Filesystems</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/maintenance/write-performance/" class="">Write Performance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/maintenance/dedicated-compaction/" class="">Dedicated Compaction</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/maintenance/manage-snapshots/" class="">Manage Snapshots</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/maintenance/rescale-bucket/" class="">Rescale Bucket</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/maintenance/manage-tags/" class="">Manage Tags</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/maintenance/metrics/" class="">Metrics</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/maintenance/manage-privileges/" class="">Manage Privileges</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/maintenance/manage-branches/" class="">Manage Branches</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/maintenance/manage-partitions/" class="">Manage Partitions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/maintenance/configurations/" class="">Configurations</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-855b9d3470d29baa3d9ac155f1cbb17e" class="toggle"  />
    <label for="section-855b9d3470d29baa3d9ac155f1cbb17e" class="flex">
      <a href="/program-api/" class="flex-auto ">Program API</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/program-api/flink-api/" class="">Flink API</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/program-api/java-api/" class="">Java API</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/program-api/catalog-api/" class="">Catalog API</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/program-api/python-api/" class="">Python API</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0ffde0363b026afda7ad294c5d18c71a" class="toggle" checked />
    <label for="section-0ffde0363b026afda7ad294c5d18c71a" class="flex">
      <a href="/migration/" class="flex-auto ">Migration</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/migration/migration-from-hive/" class="">Migration From Hive</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/migration/migration-from-iceberg/" class="">Migration From Iceberg</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/migration/upsert-to-partitioned/" class="">Upsert To Partitioned</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/migration/iceberg-compatibility/" class="active">Iceberg Compatibility</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-85fae8232c6bd11576e7262da56e3922" class="toggle"  />
    <label for="section-85fae8232c6bd11576e7262da56e3922" class="flex">
      <a href="/project/" class="flex-auto ">Project</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/project/roadmap/" class="">Roadmap</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/project/download/" class="">Download</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/project/contributing/" class="">Contributing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/project/committer/" class="">Committer</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-263d088534eb62bb6fabbdb4626879a6" class="toggle"  />
    <label for="section-263d088534eb62bb6fabbdb4626879a6" class="flex">
      <a href="/learn-paimon/" class="flex-auto ">Learn Paimon</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/learn-paimon/understand-files/" class="">Understand Files</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>














</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>Iceberg Compatibility</h3>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#append-tables">Append Tables</a></li>
    <li><a href="#primary-key-tables">Primary Key Tables</a></li>
    <li><a href="#hive-catalog">Hive Catalog</a></li>
    <li><a href="#aws-glue-catalog">AWS Glue Catalog</a></li>
    <li><a href="#aws-athena">AWS Athena</a></li>
    <li><a href="#duckdb">DuckDB</a></li>
    <li><a href="#trino-iceberg">Trino Iceberg</a></li>
    <li><a href="#supported-types">Supported Types</a></li>
    <li><a href="#table-options">Table Options</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<h1 id="iceberg-compatibility">
  Iceberg Compatibility
  <a class="anchor" href="#iceberg-compatibility">#</a>
</h1>
<p>Paimon supports generating Iceberg compatible metadata,
so that Paimon tables can be consumed directly by Iceberg readers.</p>
<p>Set the following table options, so that Paimon tables can generate Iceberg compatible metadata.</p>
<table class="table table-bordered">
    <thead>
    <tr>
      <th class="text-left" style="width: 20%">Option</th>
      <th class="text-left" style="width: 5%">Default</th>
      <th class="text-left" style="width: 10%">Type</th>
      <th class="text-left" style="width: 60%">Description</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td><h5>metadata.iceberg.storage</h5></td>
      <td style="word-wrap: break-word;">disabled</td>
      <td>Enum</td>
      <td>
        When set, produce Iceberg metadata after a snapshot is committed, so that Iceberg readers can read Paimon's raw data files.
        <ul>
          <li><code>disabled</code>: Disable Iceberg compatibility support.</li>
          <li><code>table-location</code>: Store Iceberg metadata in each table's directory.</li>
          <li><code>hadoop-catalog</code>: Store Iceberg metadata in a separate directory. This directory can be specified as the warehouse directory of an Iceberg Hadoop catalog.</li>
          <li><code>hive-catalog</code>: Not only store Iceberg metadata like hadoop-catalog, but also create Iceberg external table in Hive.</li>
        </ul>
      </td>
    </tr>
    </tbody>
</table>
<p>For most SQL users, we recommend setting <code>'metadata.iceberg.storage' = 'hadoop-catalog'</code>
or <code>'metadata.iceberg.storage' = 'hive-catalog'</code>,
so that all tables can be visited as an Iceberg warehouse.
For Iceberg Java API users, you might consider setting <code>'metadata.iceberg.storage' = 'table-location'</code>,
so you can visit each table with its table path.</p>
<h2 id="append-tables">
  Append Tables
  <a class="anchor" href="#append-tables">#</a>
</h2>
<p>Let&rsquo;s walk through a simple example, where we query Paimon tables with Iceberg connectors in Flink and Spark.
Before trying out this example, make sure that your compute engine already supports Iceberg.
Please refer to Iceberg&rsquo;s document if you haven&rsquo;t set up Iceberg.</p>
<ul>
<li>Flink: <a href="https://iceberg.apache.org/docs/latest/flink/#preparation-when-using-flink-sql-client">Preparation when using Flink SQL Client</a></li>
<li>Spark: <a href="https://iceberg.apache.org/docs/latest/spark-getting-started/#using-iceberg-in-spark-3">Using Iceberg in Spark 3</a></li>
</ul>
<p>Let&rsquo;s now create a Paimon append only table with Iceberg compatibility enabled and insert some data.</p>





<div class="book-tabs"><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Flink SQL"
    name="tabs-create-paimon-append-only-table"
    id="tabs-create-paimon-append-only-table-0"
    checked="checked" 
    onclick="onSwitch('Flink SQL')"
  />
  <label for="tabs-create-paimon-append-only-table-0">Flink SQL</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">CATALOG</span> paimon_catalog <span style="color:#66d9ef">WITH</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;type&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;paimon&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;warehouse&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&lt;path-to-warehouse&gt;&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.cities (
</span></span><span style="display:flex;"><span>    country STRING,
</span></span><span style="display:flex;"><span>    name STRING
</span></span><span style="display:flex;"><span>) <span style="color:#66d9ef">WITH</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;metadata.iceberg.storage&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hadoop-catalog&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.cities <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;usa&#39;</span>, <span style="color:#e6db74">&#39;new york&#39;</span>), (<span style="color:#e6db74">&#39;germany&#39;</span>, <span style="color:#e6db74">&#39;berlin&#39;</span>), (<span style="color:#e6db74">&#39;usa&#39;</span>, <span style="color:#e6db74">&#39;chicago&#39;</span>), (<span style="color:#e6db74">&#39;germany&#39;</span>, <span style="color:#e6db74">&#39;hamburg&#39;</span>);
</span></span></code></pre></div></div><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Spark SQL"
    name="tabs-create-paimon-append-only-table"
    id="tabs-create-paimon-append-only-table-1"
     
    onclick="onSwitch('Spark SQL')"
  />
  <label for="tabs-create-paimon-append-only-table-1">Spark SQL</label>
  <div class="book-tabs-content markdown-inner"><p>Start <code>spark-sql</code> with the following command line.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>spark-sql --jars &lt;path-to-paimon-jar&gt; <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.paimon_catalog<span style="color:#f92672">=</span>org.apache.paimon.spark.SparkCatalog <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.paimon_catalog.warehouse<span style="color:#f92672">=</span>&lt;path-to-warehouse&gt; <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --packages org.apache.iceberg:iceberg-spark-runtime-&lt;iceberg-version&gt; <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.iceberg_catalog<span style="color:#f92672">=</span>org.apache.iceberg.spark.SparkCatalog <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.iceberg_catalog.type<span style="color:#f92672">=</span>hadoop <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.iceberg_catalog.warehouse<span style="color:#f92672">=</span>&lt;path-to-warehouse&gt;/iceberg <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.iceberg_catalog.cache-enabled<span style="color:#f92672">=</span>false <span style="color:#ae81ff">\ </span><span style="color:#75715e"># disable iceberg catalog caching to quickly see the result</span>
</span></span><span style="display:flex;"><span>    --conf spark.sql.extensions<span style="color:#f92672">=</span>org.apache.paimon.spark.extensions.PaimonSparkSessionExtensions,org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions
</span></span></code></pre></div><p>Run the following Spark SQL to create Paimon table and insert data.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.cities (
</span></span><span style="display:flex;"><span>    country STRING,
</span></span><span style="display:flex;"><span>    name STRING
</span></span><span style="display:flex;"><span>) TBLPROPERTIES (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;metadata.iceberg.storage&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hadoop-catalog&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.cities <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;usa&#39;</span>, <span style="color:#e6db74">&#39;new york&#39;</span>), (<span style="color:#e6db74">&#39;germany&#39;</span>, <span style="color:#e6db74">&#39;berlin&#39;</span>), (<span style="color:#e6db74">&#39;usa&#39;</span>, <span style="color:#e6db74">&#39;chicago&#39;</span>), (<span style="color:#e6db74">&#39;germany&#39;</span>, <span style="color:#e6db74">&#39;hamburg&#39;</span>);
</span></span></code></pre></div></div></div>

<p>Now let&rsquo;s query this Paimon table with Iceberg connector.</p>





<div class="book-tabs"><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Flink SQL"
    name="tabs-query-paimon-append-only-table"
    id="tabs-query-paimon-append-only-table-0"
    checked="checked" 
    onclick="onSwitch('Flink SQL')"
  />
  <label for="tabs-query-paimon-append-only-table-0">Flink SQL</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">CATALOG</span> iceberg_catalog <span style="color:#66d9ef">WITH</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;type&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;iceberg&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;catalog-type&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hadoop&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;warehouse&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&lt;path-to-warehouse&gt;/iceberg&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;cache-enabled&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;false&#39;</span> <span style="color:#75715e">-- disable iceberg catalog caching to quickly see the result
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> iceberg_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.cities <span style="color:#66d9ef">WHERE</span> country <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;germany&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+--------------------------------+--------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| op |                        country |                           name |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+--------------------------------+--------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| +I |                        germany |                         berlin |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| +I |                        germany |                        hamburg |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+--------------------------------+--------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span></code></pre></div></div><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Spark SQL"
    name="tabs-query-paimon-append-only-table"
    id="tabs-query-paimon-append-only-table-1"
     
    onclick="onSwitch('Spark SQL')"
  />
  <label for="tabs-query-paimon-append-only-table-1">Spark SQL</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> iceberg_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.cities <span style="color:#66d9ef">WHERE</span> country <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;germany&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">germany berlin
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">germany hamburg
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span></code></pre></div></div></div>

<p>Let&rsquo;s insert more data and query again.</p>





<div class="book-tabs"><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Flink SQL"
    name="tabs-query-paimon-append-only-table-again"
    id="tabs-query-paimon-append-only-table-again-0"
    checked="checked" 
    onclick="onSwitch('Flink SQL')"
  />
  <label for="tabs-query-paimon-append-only-table-again-0">Flink SQL</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.cities <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;usa&#39;</span>, <span style="color:#e6db74">&#39;houston&#39;</span>), (<span style="color:#e6db74">&#39;germany&#39;</span>, <span style="color:#e6db74">&#39;munich&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> iceberg_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.cities <span style="color:#66d9ef">WHERE</span> country <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;germany&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+--------------------------------+--------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| op |                        country |                           name |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+--------------------------------+--------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| +I |                        germany |                         munich |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| +I |                        germany |                         berlin |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| +I |                        germany |                        hamburg |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+--------------------------------+--------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span></code></pre></div></div><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Spark SQL"
    name="tabs-query-paimon-append-only-table-again"
    id="tabs-query-paimon-append-only-table-again-1"
     
    onclick="onSwitch('Spark SQL')"
  />
  <label for="tabs-query-paimon-append-only-table-again-1">Spark SQL</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.cities <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;usa&#39;</span>, <span style="color:#e6db74">&#39;houston&#39;</span>), (<span style="color:#e6db74">&#39;germany&#39;</span>, <span style="color:#e6db74">&#39;munich&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> iceberg_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.cities <span style="color:#66d9ef">WHERE</span> country <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;germany&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">germany munich
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">germany berlin
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">germany hamburg
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span></code></pre></div></div></div>

<h2 id="primary-key-tables">
  Primary Key Tables
  <a class="anchor" href="#primary-key-tables">#</a>
</h2>





<div class="book-tabs"><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Flink SQL"
    name="tabs-paimon-primary-key-table"
    id="tabs-paimon-primary-key-table-0"
    checked="checked" 
    onclick="onSwitch('Flink SQL')"
  />
  <label for="tabs-paimon-primary-key-table-0">Flink SQL</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">CATALOG</span> paimon_catalog <span style="color:#66d9ef">WITH</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;type&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;paimon&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;warehouse&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&lt;path-to-warehouse&gt;&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.orders (
</span></span><span style="display:flex;"><span>    order_id BIGINT,
</span></span><span style="display:flex;"><span>    status STRING,
</span></span><span style="display:flex;"><span>    payment DOUBLE,
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (order_id) <span style="color:#66d9ef">NOT</span> ENFORCED
</span></span><span style="display:flex;"><span>) <span style="color:#66d9ef">WITH</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;metadata.iceberg.storage&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hadoop-catalog&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;compaction.optimization-interval&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;1ms&#39;</span> <span style="color:#75715e">-- ATTENTION: this option is only for testing, see &#34;timeliness&#34; section below for more information
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.orders <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;SUBMITTED&#39;</span>, <span style="color:#66d9ef">CAST</span>(<span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">AS</span> DOUBLE)), (<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;COMPLETED&#39;</span>, <span style="color:#ae81ff">200</span>.<span style="color:#ae81ff">0</span>), (<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;SUBMITTED&#39;</span>, <span style="color:#66d9ef">CAST</span>(<span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">AS</span> DOUBLE));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">CATALOG</span> iceberg_catalog <span style="color:#66d9ef">WITH</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;type&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;iceberg&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;catalog-type&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hadoop&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;warehouse&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&lt;path-to-warehouse&gt;/iceberg&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;cache-enabled&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;false&#39;</span> <span style="color:#75715e">-- disable iceberg catalog caching to quickly see the result
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> iceberg_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.orders <span style="color:#66d9ef">WHERE</span> status <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;COMPLETED&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+----------------------+--------------------------------+--------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| op |             order_id |                         status |                        payment |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+----------------------+--------------------------------+--------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| +I |                    2 |                      COMPLETED |                          200.0 |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+----------------------+--------------------------------+--------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.orders <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;COMPLETED&#39;</span>, <span style="color:#ae81ff">100</span>.<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> iceberg_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.orders <span style="color:#66d9ef">WHERE</span> status <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;COMPLETED&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+----------------------+--------------------------------+--------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| op |             order_id |                         status |                        payment |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+----------------------+--------------------------------+--------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| +I |                    1 |                      COMPLETED |                          100.0 |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| +I |                    2 |                      COMPLETED |                          200.0 |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+----------------------+--------------------------------+--------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span></code></pre></div></div><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Spark SQL"
    name="tabs-paimon-primary-key-table"
    id="tabs-paimon-primary-key-table-1"
     
    onclick="onSwitch('Spark SQL')"
  />
  <label for="tabs-paimon-primary-key-table-1">Spark SQL</label>
  <div class="book-tabs-content markdown-inner"><p>Start <code>spark-sql</code> with the following command line.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>spark-sql --jars &lt;path-to-paimon-jar&gt; <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.paimon_catalog<span style="color:#f92672">=</span>org.apache.paimon.spark.SparkCatalog <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.paimon_catalog.warehouse<span style="color:#f92672">=</span>&lt;path-to-warehouse&gt; <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --packages org.apache.iceberg:iceberg-spark-runtime-&lt;iceberg-version&gt; <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.iceberg_catalog<span style="color:#f92672">=</span>org.apache.iceberg.spark.SparkCatalog <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.iceberg_catalog.type<span style="color:#f92672">=</span>hadoop <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.iceberg_catalog.warehouse<span style="color:#f92672">=</span>&lt;path-to-warehouse&gt;/iceberg <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.iceberg_catalog.cache-enabled<span style="color:#f92672">=</span>false <span style="color:#ae81ff">\ </span><span style="color:#75715e"># disable iceberg catalog caching to quickly see the result</span>
</span></span><span style="display:flex;"><span>    --conf spark.sql.extensions<span style="color:#f92672">=</span>org.apache.paimon.spark.extensions.PaimonSparkSessionExtensions,org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions
</span></span></code></pre></div><p>Run the following Spark SQL to create Paimon table, insert/update data, and query with Iceberg catalog.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.orders (
</span></span><span style="display:flex;"><span>    order_id BIGINT,
</span></span><span style="display:flex;"><span>    status STRING,
</span></span><span style="display:flex;"><span>    payment DOUBLE
</span></span><span style="display:flex;"><span>) TBLPROPERTIES (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;primary-key&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;order_id&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;metadata.iceberg.storage&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hadoop-catalog&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;compaction.optimization-interval&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;1ms&#39;</span> <span style="color:#75715e">-- ATTENTION: this option is only for testing, see &#34;timeliness&#34; section below for more information
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.orders <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;SUBMITTED&#39;</span>, <span style="color:#66d9ef">CAST</span>(<span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">AS</span> DOUBLE)), (<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;COMPLETED&#39;</span>, <span style="color:#ae81ff">200</span>.<span style="color:#ae81ff">0</span>), (<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;SUBMITTED&#39;</span>, <span style="color:#66d9ef">CAST</span>(<span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">AS</span> DOUBLE));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> iceberg_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.orders <span style="color:#66d9ef">WHERE</span> status <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;COMPLETED&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">2       COMPLETED       200.0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.orders <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;COMPLETED&#39;</span>, <span style="color:#ae81ff">100</span>.<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> iceberg_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.orders <span style="color:#66d9ef">WHERE</span> status <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;COMPLETED&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">2       COMPLETED       200.0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">1       COMPLETED       100.0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span></code></pre></div></div></div>

<p>Paimon primary key tables organize data files as LSM trees, so data files must be merged in memory before querying.
However, Iceberg readers are not able to merge data files, so they can only query data files on the highest level of LSM trees.
Data files on the highest level are produced by the full compaction process.
So <strong>to conclude, for primary key tables, Iceberg readers can only query data after full compaction</strong>.</p>
<p>By default, there is no guarantee on how frequently Paimon will perform full compaction.
You can configure the following table option, so that Paimon is forced to perform full compaction after several commits.</p>
<table class="table table-bordered">
    <thead>
    <tr>
      <th class="text-left" style="width: 20%">Option</th>
      <th class="text-left" style="width: 5%">Default</th>
      <th class="text-left" style="width: 10%">Type</th>
      <th class="text-left" style="width: 60%">Description</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td><h5>compaction.optimization-interval</h5></td>
      <td style="word-wrap: break-word;">(none)</td>
      <td>Duration</td>
      <td>Full compaction will be constantly triggered per time interval. First compaction after the job starts will always be full compaction.</td>
    </tr>
    <tr>
      <td><h5>full-compaction.delta-commits</h5></td>
      <td style="word-wrap: break-word;">(none)</td>
      <td>Integer</td>
      <td>Full compaction will be constantly triggered after delta commits. Only implemented in Flink.</td>
    </tr>
    </tbody>
</table>
<p>Note that full compaction is a resource-consuming process, so the value of this table option should not be too small.
We recommend full compaction to be performed once or twice per hour.</p>
<h2 id="hive-catalog">
  Hive Catalog
  <a class="anchor" href="#hive-catalog">#</a>
</h2>
<p>When creating Paimon table, set <code>'metadata.iceberg.storage' = 'hive-catalog'</code>.
This option value not only store Iceberg metadata like hadoop-catalog, but also create Iceberg external table in Hive.
This Paimon table can be accessed from Iceberg Hive catalog later.</p>
<p>To provide information about Hive metastore,
you also need to set some (or all) of the following table options when creating Paimon table.</p>
<table class="table table-bordered">
    <thead>
    <tr>
      <th class="text-left" style="width: 20%">Option</th>
      <th class="text-left" style="width: 5%">Default</th>
      <th class="text-left" style="width: 10%">Type</th>
      <th class="text-left" style="width: 60%">Description</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td><h5>metadata.iceberg.uri</h5></td>
      <td style="word-wrap: break-word;"></td>
      <td>String</td>
      <td>Hive metastore uri for Iceberg Hive catalog.</td>
    </tr>
    <tr>
      <td><h5>metadata.iceberg.hive-conf-dir</h5></td>
      <td style="word-wrap: break-word;"></td>
      <td>String</td>
      <td>hive-conf-dir for Iceberg Hive catalog.</td>
    </tr>
    <tr>
      <td><h5>metadata.iceberg.hadoop-conf-dir</h5></td>
      <td style="word-wrap: break-word;"></td>
      <td>String</td>
      <td>hadoop-conf-dir for Iceberg Hive catalog.</td>
    </tr>
    <tr>
      <td><h5>metadata.iceberg.manifest-compression</h5></td>
      <td style="word-wrap: break-word;">snappy</td>
      <td>String</td>
      <td>Compression for Iceberg manifest files.</td>
    </tr>
    <tr>
      <td><h5>metadata.iceberg.manifest-legacy-version</h5></td>
      <td style="word-wrap: break-word;">false</td>
      <td>Boolean</td>
      <td>Should use the legacy manifest version to generate Iceberg's 1.4 manifest files.</td>
    </tr>
    <tr>
      <td><h5>metadata.iceberg.hive-client-class</h5></td>
      <td style="word-wrap: break-word;">org.apache.hadoop.hive.metastore.HiveMetaStoreClient</td>
      <td>String</td>
      <td>Hive client class name for Iceberg Hive Catalog.</td>
    </tr>
    <tr>
      <td><h5>metadata.iceberg.glue.skip-archive</h5></td>
      <td style="word-wrap: break-word;">false</td>
      <td>Boolean</td>
      <td>Skip archive for AWS Glue catalog.</td>
    </tr>
    </tbody>
</table>
<h2 id="aws-glue-catalog">
  AWS Glue Catalog
  <a class="anchor" href="#aws-glue-catalog">#</a>
</h2>
<p>You can use Hive Catalog to connect AWS Glue metastore, you can use set <code>'metadata.iceberg.hive-client-class'</code> to
<code>'com.amazonaws.glue.catalog.metastore.AWSCatalogMetastoreClient'</code>.</p>
<blockquote>
<p><strong>Note:</strong> You can use this <a href="https://github.com/promotedai/aws-glue-data-catalog-client-for-apache-hive-metastore">repo</a> to build the required jar, include it in your path and configure the AWSCatalogMetastoreClient.</p></blockquote>
<h2 id="aws-athena">
  AWS Athena
  <a class="anchor" href="#aws-athena">#</a>
</h2>
<p>AWS Athena may use old manifest reader to read Iceberg manifest by names, we should let Paimon producing legacy Iceberg
manifest list file, you can enable: <code>'metadata.iceberg.manifest-legacy-version'</code>.</p>
<h2 id="duckdb">
  DuckDB
  <a class="anchor" href="#duckdb">#</a>
</h2>
<p>Duckdb may rely on files placed in the <code>root/data</code> directory, while Paimon is usually placed directly in the <code>root</code>
directory, so you can configure this parameter for the table to achieve compatibility:
<code>'data-file.path-directory' = 'data'</code>.</p>
<h2 id="trino-iceberg">
  Trino Iceberg
  <a class="anchor" href="#trino-iceberg">#</a>
</h2>
<p>In this example, we use Trino Iceberg connector to access Paimon table through Iceberg Hive catalog.
Before trying out this example, make sure that you have configured Trino Iceberg connector.
See <a href="https://trino.io/docs/current/connector/iceberg.html#general-configuration">Trino&rsquo;s document</a> for more information.</p>
<p>Let&rsquo;s first create a Paimon table with Iceberg compatibility enabled.</p>





<div class="book-tabs"><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Flink SQL"
    name="tabs-paimon-append-only-table-trino-1"
    id="tabs-paimon-append-only-table-trino-1-0"
    checked="checked" 
    onclick="onSwitch('Flink SQL')"
  />
  <label for="tabs-paimon-append-only-table-trino-1-0">Flink SQL</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">CATALOG</span> paimon_catalog <span style="color:#66d9ef">WITH</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;type&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;paimon&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;warehouse&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&lt;path-to-warehouse&gt;&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.animals (
</span></span><span style="display:flex;"><span>    kind STRING,
</span></span><span style="display:flex;"><span>    name STRING
</span></span><span style="display:flex;"><span>) <span style="color:#66d9ef">WITH</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;metadata.iceberg.storage&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hive-catalog&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;metadata.iceberg.uri&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;thrift://&lt;host&gt;:&lt;port&gt;&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.animals <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;mammal&#39;</span>, <span style="color:#e6db74">&#39;cat&#39;</span>), (<span style="color:#e6db74">&#39;mammal&#39;</span>, <span style="color:#e6db74">&#39;dog&#39;</span>), (<span style="color:#e6db74">&#39;reptile&#39;</span>, <span style="color:#e6db74">&#39;snake&#39;</span>), (<span style="color:#e6db74">&#39;reptile&#39;</span>, <span style="color:#e6db74">&#39;lizard&#39;</span>);
</span></span></code></pre></div></div><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Spark SQL"
    name="tabs-paimon-append-only-table-trino-1"
    id="tabs-paimon-append-only-table-trino-1-1"
     
    onclick="onSwitch('Spark SQL')"
  />
  <label for="tabs-paimon-append-only-table-trino-1-1">Spark SQL</label>
  <div class="book-tabs-content markdown-inner"><p>Start <code>spark-sql</code> with the following command line.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>spark-sql --jars &lt;path-to-paimon-jar&gt; <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.paimon_catalog<span style="color:#f92672">=</span>org.apache.paimon.spark.SparkCatalog <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.paimon_catalog.warehouse<span style="color:#f92672">=</span>&lt;path-to-warehouse&gt; <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --packages org.apache.iceberg:iceberg-spark-runtime-&lt;iceberg-version&gt; <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.iceberg_catalog<span style="color:#f92672">=</span>org.apache.iceberg.spark.SparkCatalog <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.iceberg_catalog.type<span style="color:#f92672">=</span>hadoop <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.iceberg_catalog.warehouse<span style="color:#f92672">=</span>&lt;path-to-warehouse&gt;/iceberg <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --conf spark.sql.catalog.iceberg_catalog.cache-enabled<span style="color:#f92672">=</span>false <span style="color:#ae81ff">\ </span><span style="color:#75715e"># disable iceberg catalog caching to quickly see the result</span>
</span></span><span style="display:flex;"><span>    --conf spark.sql.extensions<span style="color:#f92672">=</span>org.apache.paimon.spark.extensions.PaimonSparkSessionExtensions,org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions
</span></span></code></pre></div><p>Run the following Spark SQL to create Paimon table, insert/update data, and query with Iceberg catalog.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.animals (
</span></span><span style="display:flex;"><span>    kind STRING,
</span></span><span style="display:flex;"><span>    name STRING
</span></span><span style="display:flex;"><span>) TBLPROPERTIES (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;metadata.iceberg.storage&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hive-catalog&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;metadata.iceberg.uri&#39;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;thrift://&lt;host&gt;:&lt;port&gt;&#39;</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> paimon_catalog.<span style="color:#f92672">`</span><span style="color:#66d9ef">default</span><span style="color:#f92672">`</span>.animals <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;mammal&#39;</span>, <span style="color:#e6db74">&#39;cat&#39;</span>), (<span style="color:#e6db74">&#39;mammal&#39;</span>, <span style="color:#e6db74">&#39;dog&#39;</span>), (<span style="color:#e6db74">&#39;reptile&#39;</span>, <span style="color:#e6db74">&#39;snake&#39;</span>), (<span style="color:#e6db74">&#39;reptile&#39;</span>, <span style="color:#e6db74">&#39;lizard&#39;</span>);
</span></span></code></pre></div></div></div>

<p>Start Trino using Iceberg catalog and query from Paimon table.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> animals <span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">class</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mammal&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   kind | name 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">--------+------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> mammal | cat  
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> mammal | dog  
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span></code></pre></div><h2 id="supported-types">
  Supported Types
  <a class="anchor" href="#supported-types">#</a>
</h2>
<p>Paimon Iceberg compatibility currently supports the following data types.</p>
<table>
  <thead>
      <tr>
          <th>Paimon Data Type</th>
          <th>Iceberg Data Type</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>BOOLEAN</code></td>
          <td><code>boolean</code></td>
      </tr>
      <tr>
          <td><code>INT</code></td>
          <td><code>int</code></td>
      </tr>
      <tr>
          <td><code>BIGINT</code></td>
          <td><code>long</code></td>
      </tr>
      <tr>
          <td><code>FLOAT</code></td>
          <td><code>float</code></td>
      </tr>
      <tr>
          <td><code>DOUBLE</code></td>
          <td><code>double</code></td>
      </tr>
      <tr>
          <td><code>DECIMAL</code></td>
          <td><code>decimal</code></td>
      </tr>
      <tr>
          <td><code>CHAR</code></td>
          <td><code>string</code></td>
      </tr>
      <tr>
          <td><code>VARCHAR</code></td>
          <td><code>string</code></td>
      </tr>
      <tr>
          <td><code>BINARY</code></td>
          <td><code>binary</code></td>
      </tr>
      <tr>
          <td><code>VARBINARY</code></td>
          <td><code>binary</code></td>
      </tr>
      <tr>
          <td><code>DATE</code></td>
          <td><code>date</code></td>
      </tr>
      <tr>
          <td><code>TIMESTAMP</code>*</td>
          <td><code>timestamp</code></td>
      </tr>
      <tr>
          <td><code>TIMESTAMP_LTZ</code>*</td>
          <td><code>timestamptz</code></td>
      </tr>
      <tr>
          <td><code>ARRAY</code></td>
          <td><code>list</code></td>
      </tr>
      <tr>
          <td><code>MAP</code></td>
          <td><code>map</code></td>
      </tr>
      <tr>
          <td><code>ROW</code></td>
          <td><code>struct</code></td>
      </tr>
  </tbody>
</table>
<p>*: <code>TIMESTAMP</code> and <code>TIMESTAMP_LTZ</code> type only support precision from 4 to 6</p>
<h2 id="table-options">
  Table Options
  <a class="anchor" href="#table-options">#</a>
</h2>
<p>Options for Iceberg Compatibility.</p>

<table class="configuration table table-bordered">
    <thead>
        <tr>
            <th class="text-left" style="width: 20%">Key</th>
            <th class="text-left" style="width: 15%">Default</th>
            <th class="text-left" style="width: 10%">Type</th>
            <th class="text-left" style="width: 55%">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><h5>metadata.iceberg.compaction.max.file-num</h5></td>
            <td style="word-wrap: break-word;">50</td>
            <td>Integer</td>
            <td>If number of small Iceberg manifest metadata files exceeds this limit, always trigger manifest metadata compaction regardless of their total size.</td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.compaction.min.file-num</h5></td>
            <td style="word-wrap: break-word;">10</td>
            <td>Integer</td>
            <td>Minimum number of Iceberg manifest metadata files to trigger manifest metadata compaction.</td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.database</h5></td>
            <td style="word-wrap: break-word;">(none)</td>
            <td>String</td>
            <td>Metastore database name for Iceberg Catalog. Set this as an iceberg database alias if using a centralized Catalog.</td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.delete-after-commit.enabled</h5></td>
            <td style="word-wrap: break-word;">true</td>
            <td>Boolean</td>
            <td>Whether to delete old metadata files after each table commit</td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.glue.skip-archive</h5></td>
            <td style="word-wrap: break-word;">false</td>
            <td>Boolean</td>
            <td>Skip archive for AWS Glue catalog.</td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.hadoop-conf-dir</h5></td>
            <td style="word-wrap: break-word;">(none)</td>
            <td>String</td>
            <td>hadoop-conf-dir for Iceberg Hive catalog.</td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.hive-client-class</h5></td>
            <td style="word-wrap: break-word;">"org.apache.hadoop.hive.metastore.HiveMetaStoreClient"</td>
            <td>String</td>
            <td>Hive client class name for Iceberg Hive Catalog.</td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.hive-conf-dir</h5></td>
            <td style="word-wrap: break-word;">(none)</td>
            <td>String</td>
            <td>hive-conf-dir for Iceberg Hive catalog.</td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.manifest-compression</h5></td>
            <td style="word-wrap: break-word;">"snappy"</td>
            <td>String</td>
            <td>Compression for Iceberg manifest files.</td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.manifest-legacy-version</h5></td>
            <td style="word-wrap: break-word;">false</td>
            <td>Boolean</td>
            <td>Should use the legacy manifest version to generate Iceberg's 1.4 manifest files.</td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.previous-versions-max</h5></td>
            <td style="word-wrap: break-word;">0</td>
            <td>Integer</td>
            <td>The number of old metadata files to keep after each table commit</td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.storage</h5></td>
            <td style="word-wrap: break-word;">disabled</td>
            <td><p>Enum</p></td>
            <td>When set, produce Iceberg metadata after a snapshot is committed, so that Iceberg readers can read Paimon's raw data files.<br /><br />Possible values:<ul><li>"disabled": Disable Iceberg compatibility support.</li><li>"table-location": Store Iceberg metadata in each table's directory.</li><li>"hadoop-catalog": Store Iceberg metadata in a separate directory. This directory can be specified as the warehouse directory of an Iceberg Hadoop catalog.</li><li>"hive-catalog": Not only store Iceberg metadata like hadoop-catalog, but also create Iceberg external table in Hive.</li></ul></td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.table</h5></td>
            <td style="word-wrap: break-word;">(none)</td>
            <td>String</td>
            <td>Metastore table name for Iceberg Catalog.Set this as an iceberg table alias if using a centralized Catalog.</td>
        </tr>
        <tr>
            <td><h5>metadata.iceberg.uri</h5></td>
            <td style="word-wrap: break-word;">(none)</td>
            <td>String</td>
            <td>Hive metastore uri for Iceberg Hive catalog.</td>
        </tr>
    </tbody>
</table>

</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#append-tables">Append Tables</a></li>
    <li><a href="#primary-key-tables">Primary Key Tables</a></li>
    <li><a href="#hive-catalog">Hive Catalog</a></li>
    <li><a href="#aws-glue-catalog">AWS Glue Catalog</a></li>
    <li><a href="#aws-athena">AWS Athena</a></li>
    <li><a href="#duckdb">DuckDB</a></li>
    <li><a href="#trino-iceberg">Trino Iceberg</a></li>
    <li><a href="#supported-types">Supported Types</a></li>
    <li><a href="#table-options">Table Options</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












