
<!DOCTYPE html>
<html lang="zh" dir=ZgotmplZ>

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta name="generator" content="Hugo 0.124.1">
  
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="System Tables#Paimon 提供了非常丰富的系统表，帮助用户更好地分析和查询 Paimon 表的状态：
查询数据表状态：数据系统表（Data System Table）。 查询整个 Catalog 的全局状态：全局系统表（Global System Table）。 Data System Table#数据系统表包含每个 Paimon 数据表的元数据和信息，如创建的快照及使用的选项。用户可以通过批量查询访问系统表。
目前，Flink、Spark、Trino 和 StarRocks 支持查询系统表。
在某些情况下，表名需要用反引号括起来以避免语法解析冲突，例如三重访问模式：
SELECT * FROM my_catalog.my_db.`my_table$snapshots`; Snapshots Table#你可以通过 snapshots 表查询表的快照历史信息，包括快照中发生的记录数。
SELECT * FROM my_table$snapshots; /* &#43;--------------&#43;------------&#43;-----------------&#43;-------------------&#43;--------------&#43;-------------------------&#43;--------------------------------&#43;------------------------------- &#43;--------------------------------&#43;---------------------&#43;---------------------&#43;-------------------------&#43;----------------&#43; | snapshot_id | schema_id | commit_user | commit_identifier | commit_kind | commit_time | base_manifest_list | delta_manifest_list | changelog_manifest_list | total_record_count | delta_record_count | changelog_record_count | watermark | &#43;--------------&#43;------------&#43;-----------------&#43;-------------------&#43;--------------&#43;-------------------------&#43;--------------------------------&#43;------------------------------- &#43;--------------------------------&#43;---------------------&#43;---------------------&#43;-------------------------&#43;----------------&#43; | 2 | 0 | 7ca4cd28-98e.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="系统表 System Tables" />
<meta property="og:description" content="System Tables#Paimon 提供了非常丰富的系统表，帮助用户更好地分析和查询 Paimon 表的状态：
查询数据表状态：数据系统表（Data System Table）。 查询整个 Catalog 的全局状态：全局系统表（Global System Table）。 Data System Table#数据系统表包含每个 Paimon 数据表的元数据和信息，如创建的快照及使用的选项。用户可以通过批量查询访问系统表。
目前，Flink、Spark、Trino 和 StarRocks 支持查询系统表。
在某些情况下，表名需要用反引号括起来以避免语法解析冲突，例如三重访问模式：
SELECT * FROM my_catalog.my_db.`my_table$snapshots`; Snapshots Table#你可以通过 snapshots 表查询表的快照历史信息，包括快照中发生的记录数。
SELECT * FROM my_table$snapshots; /* &#43;--------------&#43;------------&#43;-----------------&#43;-------------------&#43;--------------&#43;-------------------------&#43;--------------------------------&#43;------------------------------- &#43;--------------------------------&#43;---------------------&#43;---------------------&#43;-------------------------&#43;----------------&#43; | snapshot_id | schema_id | commit_user | commit_identifier | commit_kind | commit_time | base_manifest_list | delta_manifest_list | changelog_manifest_list | total_record_count | delta_record_count | changelog_record_count | watermark | &#43;--------------&#43;------------&#43;-----------------&#43;-------------------&#43;--------------&#43;-------------------------&#43;--------------------------------&#43;------------------------------- &#43;--------------------------------&#43;---------------------&#43;---------------------&#43;-------------------------&#43;----------------&#43; | 2 | 0 | 7ca4cd28-98e." />
<meta property="og:type" content="article" />
<meta property="og:url" content="//localhost:1313/concepts/system-tables/" /><meta property="article:section" content="concepts" />


<title>系统表 System Tables | Paimon文档</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="alternate" hreflang="en" href="//localhost:1313/en/concepts/system-tables/" title="System Tables">

<link rel="stylesheet" href="/book.min.b952fefba7a2e6dac79b3035a33b021d21a5f84843c9890ad9ab605f3bfe0eac.css" integrity="sha256-uVL&#43;&#43;6ei5trHmzA1ozsCHSGl&#43;EhDyYkK2atgXzv&#43;Dqw=">
<script defer src="/zh.search.min.42267b06c2400afe59d1f4067653c847750f3b39aa2e1bfd4711107a078a53e4.js" integrity="sha256-QiZ7BsJACv5Z0fQGdlPIR3UPOzmqLhv9RxEQegeKU&#43;Q="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
  

<link rel="stylesheet" type="text/css" href="//localhost:1313//font-awesome/css/font-awesome.min.css">
<script src="//localhost:1313//js/anchor.min.js"></script>
<script src="//localhost:1313//js/flink.js"></script>



  
  <script>
    var _paq = window._paq = window._paq || [];
     
     
    _paq.push(['disableCookies']);
     
    _paq.push(["setDomains", ["*.flink.apache.org","*.nightlies.apache.org/flink"]]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="//matomo.privacy.apache.org/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '1']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  
</head>

<body dir=ZgotmplZ>
  
    <input type="checkbox" class="hidden toggle" id="menu-control" />
    <input type="checkbox" class="hidden toggle" id="toc-control" />
  
  <main class="container flex">
    
      <aside class="book-menu">
        
  

<nav>


<a id="logo" href="//localhost:1313/">
    <img width="100%" src="//localhost:1313//paimon_black.svg">
</a>
<p style="text-align:right">1.2.0</p>

<div class="book-search">
  <input type="text" id="book-search-input" placeholder="搜索" aria-label="搜索" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>










  





  
  <ul>
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-c731eb3eada0765f704948e2d3b9bb48" class="toggle" checked />
    <label for="section-c731eb3eada0765f704948e2d3b9bb48" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-book title maindish" aria-hidden="true"></i>&nbsp;&nbsp;概念 Concepts</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/overview/" class="">概述</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/basic-concepts/" class="">基础概念 Basic Concepts</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/concurrency-control/" class="">并发控制 Concurrency Control</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/catalog/" class="">Catalog</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-8451cf5dbd0ba165d2eff8eab794a5e2" class="toggle"  />
    <label for="section-8451cf5dbd0ba165d2eff8eab794a5e2" class="flex justify-between">RESTCatalog<span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/rest/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/rest/bear/" class="">Bear Token</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/rest/dlf/" class="">DLF Token</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/rest/rest-api/" class="">REST API</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/table-types/" class="">表类型 Table Types</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/system-tables/" class=" active">系统表 System Tables</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/data-types/" class="">数据类型 Data Types</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/functions/" class="">函数 Functions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-04b977f4d78c1a1179624ef9cf1c052f" class="toggle"  />
    <label for="section-04b977f4d78c1a1179624ef9cf1c052f" class="flex justify-between">规范说明 Specification<span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/spec/overview/" class="">概述 Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/spec/schema/" class="">模式文件 Schema</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/spec/snapshot/" class="">快照文件 Snapshot</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/spec/manifest/" class="">清单文件 Manifest</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/spec/datafile/" class="">数据文件 DataFile</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/spec/tableindex/" class="">表索引 Table Index</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/concepts/spec/fileindex/" class="">文件索引 File Index</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-13198e701ffb9c73ec7a3177a4f953f1" class="toggle"  />
    <label for="section-13198e701ffb9c73ec7a3177a4f953f1" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-database title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Table with PK</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/primary-key-table/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/primary-key-table/data-distribution/" class="">Data Distribution</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/primary-key-table/table-mode/" class="">Table Mode</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-f845a63b155c9d2fb0db740cc418eb68" class="toggle"  />
    <label for="section-f845a63b155c9d2fb0db740cc418eb68" class="flex justify-between">Merge Engine<span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/primary-key-table/merge-engine/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/primary-key-table/merge-engine/partial-update/" class="">Partial Update</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/primary-key-table/merge-engine/aggregation/" class="">Aggregation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/primary-key-table/merge-engine/first-row/" class="">First Row</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/primary-key-table/changelog-producer/" class="">Changelog Producer</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/primary-key-table/sequence-rowkind/" class="">Sequence & Rowkind</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/primary-key-table/compaction/" class="">Compaction</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/primary-key-table/query-performance/" class="">Query Performance</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-bb708993c18bd45422a8bcf87778bb93" class="toggle"  />
    <label for="section-bb708993c18bd45422a8bcf87778bb93" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-database title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Table w/o PK</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/append-table/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/append-table/streaming/" class="">Streaming</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/append-table/query-performance/" class="">Query Performance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/append-table/update/" class="">Update</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/append-table/bucketed/" class="">Bucketed</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-23c9b577a4c36b65f28196976e8af8fd" class="toggle"  />
    <label for="section-23c9b577a4c36b65f28196976e8af8fd" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-gear title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Engine Flink</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/flink/quick-start/" class="">Quick Start</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/flink/sql-ddl/" class="">SQL DDL</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/flink/sql-write/" class="">SQL Write</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/flink/sql-query/" class="">SQL Query</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/flink/consumer-id/" class="">Consumer ID</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/flink/sql-lookup/" class="">SQL Lookup</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/flink/sql-alter/" class="">SQL Alter</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/flink/procedures/" class="">Procedures</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/flink/action-jars/" class="">Action Jars</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/flink/savepoint/" class="">Savepoint</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-86d841c4a4c551bb4e21d460836d4142" class="toggle"  />
    <label for="section-86d841c4a4c551bb4e21d460836d4142" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-gear title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Engine Spark</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/spark/quick-start/" class="">Quick Start</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/spark/sql-ddl/" class="">SQL DDL</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/spark/sql-functions/" class="">SQL Functions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/spark/sql-write/" class="">SQL Write</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/spark/sql-query/" class="">SQL Query</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/spark/sql-alter/" class="">SQL Alter</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/spark/auxiliary/" class="">Auxiliary</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/spark/procedures/" class="">Procedures</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-30d29cf6aaa7fb1e0e056430337d3cd8" class="toggle"  />
    <label for="section-30d29cf6aaa7fb1e0e056430337d3cd8" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-gear title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Ecosystem</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/ecosystem/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/ecosystem/starrocks/" class="">StarRocks</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/ecosystem/doris/" class="">Doris</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/ecosystem/hive/" class="">Hive</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/ecosystem/trino/" class="">Trino</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/ecosystem/amoro/" class="">Amoro</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-0d8ed5dd97c2657084dd792a5fb3dc39" class="toggle"  />
    <label for="section-0d8ed5dd97c2657084dd792a5fb3dc39" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-gear title maindish" aria-hidden="true"></i>&nbsp;&nbsp;CDC Ingestion</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/cdc-ingestion/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/cdc-ingestion/mysql-cdc/" class="">Mysql CDC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/cdc-ingestion/postgres-cdc/" class="">Postgres CDC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/cdc-ingestion/kafka-cdc/" class="">Kafka CDC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/cdc-ingestion/mongo-cdc/" class="">Mongo CDC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/cdc-ingestion/pulsar-cdc/" class="">Pulsar CDC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/cdc-ingestion/debezium-bson/" class="">Debezium BSON</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-572d5eb93948a39233efdc1aa454d415" class="toggle"  />
    <label for="section-572d5eb93948a39233efdc1aa454d415" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-wrench title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Maintenance</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/maintenance/filesystems/" class="">Filesystems</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/maintenance/write-performance/" class="">Write Performance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/maintenance/dedicated-compaction/" class="">Dedicated Compaction</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/maintenance/manage-snapshots/" class="">Manage Snapshots</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/maintenance/rescale-bucket/" class="">Rescale Bucket</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/maintenance/manage-tags/" class="">Manage Tags</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/maintenance/metrics/" class="">Metrics</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/maintenance/manage-privileges/" class="">Manage Privileges</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/maintenance/manage-branches/" class="">Manage Branches</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/maintenance/manage-partitions/" class="">Manage Partitions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/maintenance/configurations/" class="">Configurations</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-ffda0ff45a34e5f3ed8bf3826a7c8879" class="toggle"  />
    <label for="section-ffda0ff45a34e5f3ed8bf3826a7c8879" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-briefcase title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Program API</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/program-api/rest-api/" class="">REST API</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/program-api/flink-api/" class="">Flink API</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/program-api/java-api/" class="">Java API</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/program-api/catalog-api/" class="">Catalog API</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/program-api/python-api/" class="">Python API</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-3f8a436f48e29eeb422e6dd0a6e20e71" class="toggle"  />
    <label for="section-3f8a436f48e29eeb422e6dd0a6e20e71" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-briefcase title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Migration</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/migration/migration-from-hive/" class="">Migration From Hive</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/migration/migration-from-iceberg/" class="">Migration From Iceberg</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/migration/upsert-to-partitioned/" class="">Upsert To Partitioned</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/migration/clone-to-paimon/" class="">Clone To Paimon</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-3882ebcb06158ef11bac6340af15617a" class="toggle"  />
    <label for="section-3882ebcb06158ef11bac6340af15617a" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-briefcase title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Iceberg Metadata</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/iceberg/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/iceberg/append-table/" class="">Append Table</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/iceberg/primary-key-table/" class="">Primary Key Table</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/iceberg/iceberg-tags/" class="">Iceberg Tags</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/iceberg/hive-catalog/" class="">Hive Catalogs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/iceberg/ecosystem/" class="">Ecosystem</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/iceberg/configurations/" class="">Configurations</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  	<br/>
  
  
    <input type="checkbox" id="section-fd0d6ee095aef42da7d15863a92a4aa0" class="toggle"  />
    <label for="section-fd0d6ee095aef42da7d15863a92a4aa0" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-sitemap title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Project</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/project/roadmap/" class="">Roadmap</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/project/download/" class="">Download</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/project/contributing/" class="">Contributing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/project/committer/" class="">Committer</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-9e09a206f89e5011227bdf8d37b7ee20" class="toggle"  />
    <label for="section-9e09a206f89e5011227bdf8d37b7ee20" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-sitemap title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Learn Paimon</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//localhost:1313/learn-paimon/understand-files/" class="">Understand Files</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>
















<br/>
<hr class="menu-break">

<a href="//paimon.apache.org" style="color:black;margin-bottom:0.5em"><i class="link fa fa-external-link title" aria-hidden="true"></i> Project Homepage</a>
<br/>

<a href="//paimon.apache.org/docs/master/api/java/" style="color:black;margin-bottom:0.5em"><i class="link fa fa-external-link title" aria-hidden="true"></i> JavaDocs</a>
<br/>

<hr class="menu-break">
<li style="list-style-type: none">
  <br>
  <input type="checkbox" id="section-version-picker" class="toggle">
  <label for="section-version-picker" class="flex justify-between">
     <div style="font-weight:450;margin-bottom:0.5em">Pick Docs Version</div>
     <span>▾</span>
  </label>
  <ul>
    <a href="//localhost:1313/">
      1.2 (✓)
    </a>
    <hr class="menu-break">
    
      <li>
        <a href="https://paimon.apache.org/docs/master">
          master
        </a>
      </li>
    
      <li>
        <a href="https://paimon.apache.org/docs/1.2">
          stable
        </a>
      </li>
    
      <li>
        <a href="https://paimon.apache.org/docs/1.2">
          1.2
        </a>
      </li>
    
      <li>
        <a href="https://paimon.apache.org/docs/1.1">
          1.1
        </a>
      </li>
    
      <li>
        <a href="https://paimon.apache.org/docs/1.0">
          1.0
        </a>
      </li>
    
    <hr class="menu-break">
    <li>
      <a href="//localhost:1313//versions">
          All Versions
      </a>
    </li>
  </ul>
</li>




  

  


  





<a  href="//localhost:1313/en/concepts/system-tables/" class="flex align-center">
  <i class="fa fa-globe" aria-hidden="true"></i>&nbsp;&nbsp;
  English
</a>



</nav>




  <script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </aside>
    

    <div class="book-page">
      
        <header class="book-header">
          
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>系统表 System Tables</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  

<nav id="TableOfContents"><h3>On This Page <button class="toc" onclick="collapseToc()"><i class="fa fa-compress" aria-hidden="true"></i></button></h3>
  <ul>
    <li><a href="#data-system-table">Data System Table</a>
      <ul>
        <li><a href="#snapshots-table">Snapshots Table</a></li>
        <li><a href="#schemas-table">Schemas Table</a></li>
        <li><a href="#options-table">Options Table</a></li>
        <li><a href="#audit-log-table">Audit log Table</a></li>
        <li><a href="#binlog-table">Binlog Table</a></li>
        <li><a href="#read-optimized-table">Read-optimized Table</a></li>
        <li><a href="#files-table">Files Table</a></li>
        <li><a href="#tags-table">Tags Table</a></li>
        <li><a href="#branches-table">Branches Table</a></li>
        <li><a href="#consumers-table">Consumers Table</a></li>
        <li><a href="#manifests-table">Manifests Table</a></li>
        <li><a href="#aggregation-fields-table">Aggregation fields Table</a></li>
        <li><a href="#partitions-table">Partitions Table</a></li>
        <li><a href="#buckets-table">Buckets Table</a></li>
        <li><a href="#statistic-table">Statistic Table</a></li>
        <li><a href="#table-indexes-table">Table Indexes Table</a></li>
      </ul>
    </li>
    <li><a href="#global-system-table">Global System Table</a>
      <ul>
        <li><a href="#all-options-table">ALL Options Table</a></li>
        <li><a href="#catalog-options-table">Catalog Options Table</a></li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
        </header>
      

      






      
  <article class="markdown"><!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<h1 id="system-tables">
  System Tables
  <a class="anchor" href="#system-tables">#</a>
</h1>
<p>Paimon 提供了非常丰富的系统表，帮助用户更好地分析和查询 Paimon 表的状态：</p>
<ol>
<li>查询数据表状态：数据系统表（Data System Table）。</li>
<li>查询整个 Catalog 的全局状态：全局系统表（Global System Table）。</li>
</ol>
<h2 id="data-system-table">
  Data System Table
  <a class="anchor" href="#data-system-table">#</a>
</h2>
<p>数据系统表包含每个 Paimon 数据表的元数据和信息，如创建的快照及使用的选项。用户可以通过批量查询访问系统表。</p>
<p>目前，Flink、Spark、Trino 和 StarRocks 支持查询系统表。</p>
<p>在某些情况下，表名需要用反引号括起来以避免语法解析冲突，例如三重访问模式：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_catalog</span><span class="p">.</span><span class="n">my_db</span><span class="p">.</span><span class="o">`</span><span class="n">my_table$snapshots</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h3 id="snapshots-table">
  Snapshots Table
  <a class="anchor" href="#snapshots-table">#</a>
</h3>
<p>你可以通过 snapshots 表查询表的快照历史信息，包括快照中发生的记录数。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$snapshots</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------+------------+-----------------+-------------------+--------------+-------------------------+--------------------------------+------------------------------- +--------------------------------+---------------------+---------------------+-------------------------+----------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|  snapshot_id |  schema_id |     commit_user | commit_identifier |  commit_kind |             commit_time |             base_manifest_list |            delta_manifest_list |        changelog_manifest_list |  total_record_count |  delta_record_count |  changelog_record_count |      watermark |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------+------------+-----------------+-------------------+--------------+-------------------------+--------------------------------+------------------------------- +--------------------------------+---------------------+---------------------+-------------------------+----------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|            2 |          0 | 7ca4cd28-98e... |                 2 |       APPEND | 2022-10-26 11:44:15.600 | manifest-list-31323d5f-76e6... | manifest-list-31323d5f-76e6... | manifest-list-31323d5f-76e6... |                   2 |                   2 |                       0 |  1666755855600 |
</span></span></span><span class="line"><span class="cl"><span class="cm">|            1 |          0 | 870062aa-3e9... |                 1 |       APPEND | 2022-10-26 11:44:15.148 | manifest-list-31593d5f-76e6... | manifest-list-31593d5f-76e6... | manifest-list-31593d5f-76e6... |                   1 |                   1 |                       0 |  1666755855148 |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------+------------+-----------------+-------------------+--------------+-------------------------+--------------------------------+------------------------------- +--------------------------------+---------------------+---------------------+-------------------------+----------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">2 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><p>通过查询 snapshots 表，你可以了解该表的提交和过期信息，并可通过数据进行时间旅行。</p>
<h3 id="schemas-table">
  Schemas Table
  <a class="anchor" href="#schemas-table">#</a>
</h3>
<p>你可以通过 schemas 表查询该表的历史 schema 信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$schemas</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+-----------+--------------------------------+----------------+--------------+---------+---------+-------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| schema_id |                         fields | partition_keys | primary_keys | options | comment |       update_time       |
</span></span></span><span class="line"><span class="cl"><span class="cm">+-----------+--------------------------------+----------------+--------------+---------+---------+-------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|         0 | [{&#34;id&#34;:0,&#34;name&#34;:&#34;word&#34;,&#34;typ... |             [] |     [&#34;word&#34;] |      {} |         | 2022-10-28 11:44:20.600 |
</span></span></span><span class="line"><span class="cl"><span class="cm">|         1 | [{&#34;id&#34;:0,&#34;name&#34;:&#34;word&#34;,&#34;typ... |             [] |     [&#34;word&#34;] |      {} |         | 2022-10-27 11:44:15.600 |
</span></span></span><span class="line"><span class="cl"><span class="cm">|         2 | [{&#34;id&#34;:0,&#34;name&#34;:&#34;word&#34;,&#34;typ... |             [] |     [&#34;word&#34;] |      {} |         | 2022-10-26 11:44:10.600 |
</span></span></span><span class="line"><span class="cl"><span class="cm">+-----------+--------------------------------+----------------+--------------+---------+---------+-------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">3 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><p>你可以关联 snapshots 表和 schemas 表，以获取指定快照的字段信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">snapshot_id</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">schema_id</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">fields</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$snapshots</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">my_table$schemas</span><span class="w"> </span><span class="n">t</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">schema_id</span><span class="o">=</span><span class="n">t</span><span class="p">.</span><span class="n">schema_id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">snapshot_id</span><span class="o">=</span><span class="mi">100</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h3 id="options-table">
  Options Table
  <a class="anchor" href="#options-table">#</a>
</h3>
<p>你可以通过 options 表查询表的选项信息，这些选项是在 DDL 中指定的。未显示的选项则为默认值。你可以参考 <a href="//localhost:1313/maintenance/configurations/#coreoptions">Configuration</a>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$options</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------------+--------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|         key            |        value       |
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------------+--------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| snapshot.time-retained |         5 h        |
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------------+--------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">1 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="audit-log-table">
  Audit log Table
  <a class="anchor" href="#audit-log-table">#</a>
</h3>
<p>如果需要审计表的变更日志，可以使用 <code>audit_log</code> 系统表。通过 <code>audit_log</code> 表，你可以获取表的增量数据中的 <code>rowkind</code> 列。你可以利用该列进行过滤和其他操作来完成审计。</p>
<p><code>rowkind</code> 有四种取值：</p>
<ul>
<li><code>+I</code>：插入操作。</li>
<li><code>-U</code>：更新操作，表示更新前的旧内容。</li>
<li><code>+U</code>：更新操作，表示更新后的新内容。</li>
<li><code>-D</code>：删除操作。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$audit_log</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------+-----------------+-----------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|     rowkind      |     column_0    |     column_1    |
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------+-----------------+-----------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|        +I        |      ...        |      ...        |
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------+-----------------+-----------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|        -U        |      ...        |      ...        |
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------+-----------------+-----------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|        +U        |      ...        |      ...        |
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------+-----------------+-----------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">3 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="binlog-table">
  Binlog Table
  <a class="anchor" href="#binlog-table">#</a>
</h3>
<p>你可以通过 binlog 表查询变更日志。在 binlog 系统表中，更新前和更新后的内容会打包在同一行。</p>
<p>目前，binlog 表无法显示 Flink 计算列。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">T$binlog</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------+----------------------+-----------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|     rowkind      |       column_0       |       column_1        |
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------+----------------------+-----------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|        +I        |       [col_0]        |       [col_1]         |
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------+----------------------+-----------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|        +U        | [col_0_ub, col_0_ua] | [col_1_ub, col_1_ua]  |
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------+----------------------+-----------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|        -D        |       [col_0]        |       [col_1]         |
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------------+----------------------+-----------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="read-optimized-table">
  Read-optimized Table
  <a class="anchor" href="#read-optimized-table">#</a>
</h3>
<p>如果你需要极致的读取性能并且能够接受读取稍微旧一点的数据，可以使用 <code>ro</code>（只读优化）系统表。<br>
只读优化系统表通过只扫描不需要合并的文件来提升读取性能。</p>
<p>对于带主键的表，<code>ro</code> 系统表只扫描最顶层的文件。<br>
也就是说，<code>ro</code> 系统表只输出最新一次全量压缩的结果。</p>
<blockquote class="book-hint info">
  不同的桶可能在不同时间进行全量压缩，<br>
因此不同键的值可能来自不同的快照。
</blockquote>

<p>对于追加表，由于所有文件均可直接读取且无需合并，<br>
<code>ro</code> 系统表表现得就像普通的追加表。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$ro</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h3 id="files-table">
  Files Table
  <a class="anchor" href="#files-table">#</a>
</h3>
<p>你可以查询指定快照的表文件信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- Query the files of latest snapshot
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$files</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+-----------+--------+--------------------------------+-------------+-----------+-------+--------------+--------------------+---------+---------+------------------------+-------------------------+-------------------------+---------------------+---------------------+-----------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| partition | bucket |                      file_path | file_format | schema_id | level | record_count | file_size_in_bytes | min_key | max_key |      null_value_counts |         min_value_stats |         max_value_stats | min_sequence_number | max_sequence_number |         creation_time |
</span></span></span><span class="line"><span class="cl"><span class="cm">+-----------+--------+--------------------------------+-------------+-----------+-------+--------------+--------------------+---------+---------+------------------------+-------------------------+-------------------------+---------------------+---------------------+-----------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|       {3} |      0 | data-8f64af95-29cc-4342-adc... |         orc |         0 |     0 |            1 |                593 |     [c] |     [c] | {cnt=0, val=0, word=0} | {cnt=3, val=33, word=c} | {cnt=3, val=33, word=c} |       1691551246234 |       1691551246637 |2023-02-24T16:06:21.166|
</span></span></span><span class="line"><span class="cl"><span class="cm">|       {2} |      0 | data-8b369068-0d37-4011-aa5... |         orc |         0 |     0 |            1 |                593 |     [b] |     [b] | {cnt=0, val=0, word=0} | {cnt=2, val=22, word=b} | {cnt=2, val=22, word=b} |       1691551246233 |       1691551246732 |2023-02-24T16:06:21.166|
</span></span></span><span class="line"><span class="cl"><span class="cm">|       {2} |      0 | data-83aa7973-060b-40b6-8c8... |         orc |         0 |     0 |            1 |                605 |     [d] |     [d] | {cnt=0, val=0, word=0} | {cnt=2, val=32, word=d} | {cnt=2, val=32, word=d} |       1691551246267 |       1691551246798 |2023-02-24T16:06:21.166|
</span></span></span><span class="line"><span class="cl"><span class="cm">|       {5} |      0 | data-3d304f4a-bcea-44dc-a13... |         orc |         0 |     0 |            1 |                593 |     [c] |     [c] | {cnt=0, val=0, word=0} | {cnt=5, val=51, word=c} | {cnt=5, val=51, word=c} |       1691551246788 |       1691551246152 |2023-02-24T16:06:21.166|
</span></span></span><span class="line"><span class="cl"><span class="cm">|       {1} |      0 | data-10abb5bc-0170-43ae-b6a... |         orc |         0 |     0 |            1 |                595 |     [a] |     [a] | {cnt=0, val=0, word=0} | {cnt=1, val=11, word=a} | {cnt=1, val=11, word=a} |       1691551246722 |       1691551246273 |2023-02-24T16:06:21.166|
</span></span></span><span class="line"><span class="cl"><span class="cm">|       {4} |      0 | data-2c9b7095-65b7-4013-a7a... |         orc |         0 |     0 |            1 |                593 |     [a] |     [a] | {cnt=0, val=0, word=0} | {cnt=4, val=12, word=a} | {cnt=4, val=12, word=a} |       1691551246321 |       1691551246109 |2023-02-24T16:06:21.166|
</span></span></span><span class="line"><span class="cl"><span class="cm">+-----------+--------+--------------------------------+-------------+-----------+-------+--------------+--------------------+---------+---------+------------------------+-------------------------+-------------------------+---------------------+---------------------+-----------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">6 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- You can also query the files with specific snapshot
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$files</span><span class="w"> </span><span class="cm">/*+ OPTIONS(&#39;scan.snapshot-id&#39;=&#39;1&#39;) */</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+-----------+--------+--------------------------------+-------------+-----------+-------+--------------+--------------------+---------+---------+------------------------+-------------------------+-------------------------+---------------------+---------------------+-----------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| partition | bucket |                      file_path | file_format | schema_id | level | record_count | file_size_in_bytes | min_key | max_key |      null_value_counts |         min_value_stats |         max_value_stats | min_sequence_number | max_sequence_number |         creation_time |
</span></span></span><span class="line"><span class="cl"><span class="cm">+-----------+--------+--------------------------------+-------------+-----------+-------+--------------+--------------------+---------+---------+------------------------+-------------------------+-------------------------+---------------------+---------------------+-----------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|       {3} |      0 | data-8f64af95-29cc-4342-adc... |         orc |         0 |     0 |            1 |                593 |     [c] |     [c] | {cnt=0, val=0, word=0} | {cnt=3, val=33, word=c} | {cnt=3, val=33, word=c} |       1691551246234 |       1691551246637 |2023-02-24T16:06:21.166|
</span></span></span><span class="line"><span class="cl"><span class="cm">|       {2} |      0 | data-8b369068-0d37-4011-aa5... |         orc |         0 |     0 |            1 |                593 |     [b] |     [b] | {cnt=0, val=0, word=0} | {cnt=2, val=22, word=b} | {cnt=2, val=22, word=b} |       1691551246233 |       1691551246732 |2023-02-24T16:06:21.166|
</span></span></span><span class="line"><span class="cl"><span class="cm">|       {1} |      0 | data-10abb5bc-0170-43ae-b6a... |         orc |         0 |     0 |            1 |                595 |     [a] |     [a] | {cnt=0, val=0, word=0} | {cnt=1, val=11, word=a} | {cnt=1, val=11, word=a} |       1691551246267 |       1691551246798 |2023-02-24T16:06:21.166|
</span></span></span><span class="line"><span class="cl"><span class="cm">+-----------+--------+--------------------------------+-------------+-----------+-------+--------------+--------------------+---------+---------+------------------------+-------------------------+-------------------------+---------------------+---------------------+-----------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">3 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="tags-table">
  Tags Table
  <a class="anchor" href="#tags-table">#</a>
</h3>
<p>你可以通过 tags 表查询表的标签历史信息，包括标签基于的快照以及快照的一些历史信息。你还可以获取所有标签名称，并通过标签名称进行时间旅行，访问特定标签的数据。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$tags</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+----------+-------------+-----------+-------------------------+--------------+--------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| tag_name | snapshot_id | schema_id |             commit_time | record_count |   branches   |
</span></span></span><span class="line"><span class="cl"><span class="cm">+----------+-------------+-----------+-------------------------+--------------+--------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|     tag1 |           1 |         0 | 2023-06-28 14:55:29.344 |            3 |      []      |
</span></span></span><span class="line"><span class="cl"><span class="cm">|     tag3 |           3 |         0 | 2023-06-28 14:58:24.691 |            7 |  [branch-1]  |
</span></span></span><span class="line"><span class="cl"><span class="cm">+----------+-------------+-----------+-------------------------+--------------+--------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">2 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="branches-table">
  Branches Table
  <a class="anchor" href="#branches-table">#</a>
</h3>
<p>你可以查询表的分支信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$branches</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+----------------------+-------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|          branch_name |             create_time |
</span></span></span><span class="line"><span class="cl"><span class="cm">+----------------------+-------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|              branch1 | 2024-07-18 20:31:39.084 |
</span></span></span><span class="line"><span class="cl"><span class="cm">|              branch2 | 2024-07-18 21:11:14.373 |
</span></span></span><span class="line"><span class="cl"><span class="cm">+----------------------+-------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">2 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="consumers-table">
  Consumers Table
  <a class="anchor" href="#consumers-table">#</a>
</h3>
<p>你可以查询包含下一快照的所有消费者信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$consumers</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+-------------+------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| consumer_id | next_snapshot_id |
</span></span></span><span class="line"><span class="cl"><span class="cm">+-------------+------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|         id1 |                1 |
</span></span></span><span class="line"><span class="cl"><span class="cm">|         id2 |                3 |
</span></span></span><span class="line"><span class="cl"><span class="cm">+-------------+------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">2 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="manifests-table">
  Manifests Table
  <a class="anchor" href="#manifests-table">#</a>
</h3>
<p>你可以查询当前表的最新快照或指定快照中包含的所有清单（manifest）文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- Query the manifest of latest snapshot
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$manifests</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+------------------+-------------------+---------------+---------------------+---------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|                      file_name |   file_size |  num_added_files | num_deleted_files |     schema_id | min_partition_stats | max_partition_stats |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+------------------+-------------------+---------------+---------------------+---------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| manifest-f4dcab43-ef6b-4713... |        12365|               40 |                 0 |             0 |      {20230315, 00} |      {20230315, 20} |
</span></span></span><span class="line"><span class="cl"><span class="cm">| manifest-f4dcab43-ef6b-4713... |        1648 |                1 |                 0 |             0 |      {20230115, 00} |      {20230316, 23} |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+------------------+-------------------+---------------+---------------------+---------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">2 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- You can also query the manifest with specified snapshot
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$manifests</span><span class="w"> </span><span class="cm">/*+ OPTIONS(&#39;scan.snapshot-id&#39;=&#39;1&#39;) */</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+------------------+-------------------+---------------+---------------------+---------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|                      file_name |   file_size |  num_added_files | num_deleted_files |     schema_id | min_partition_stats | max_partition_stats |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+------------------+-------------------+---------------+---------------------+---------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| manifest-f4dcab43-ef6b-4713... |        12365|               40 |                 0 |             0 |      {20230315, 00} |      {20230315, 20} |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+------------------+-------------------+---------------+---------------------+---------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">1 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">-</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">manifest</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">tagName</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$manifests</span><span class="w"> </span><span class="cm">/*+ OPTIONS(&#39;scan.tag-name&#39;=&#39;tag1&#39;) */</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+------------------+-------------------+---------------+---------------------+---------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|                      file_name |   file_size |  num_added_files | num_deleted_files |     schema_id | min_partition_stats | max_partition_stats |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+------------------+-------------------+---------------+---------------------+---------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| manifest-f4dcab43-ef6b-4713... |        12365|               40 |                 0 |             0 |      {20230315, 00} |      {20230315, 20} |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+------------------+-------------------+---------------+---------------------+---------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">1 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">-</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">manifest</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="k">timestamp</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">unix</span><span class="w"> </span><span class="n">milliseconds</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$manifests</span><span class="w"> </span><span class="cm">/*+ OPTIONS(&#39;scan.timestamp-millis&#39;=&#39;1678883047356&#39;) */</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+------------------+-------------------+---------------+---------------------+---------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|                      file_name |   file_size |  num_added_files | num_deleted_files |     schema_id | min_partition_stats | max_partition_stats |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+------------------+-------------------+---------------+---------------------+---------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| manifest-f4dcab43-ef6b-4713... |        12365|               40 |                 0 |             0 |      {20230315, 00} |      {20230315, 20} |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+------------------+-------------------+---------------+---------------------+---------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">1 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="aggregation-fields-table">
  Aggregation fields Table
  <a class="anchor" href="#aggregation-fields-table">#</a>
</h3>
<p>你可以通过 aggregation fields 表查询表的历史聚合信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$aggregation_fields</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------+-----------------+--------------+--------------------------------+---------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| field_name |      field_type |    function  |               function_options | comment |
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------+-----------------+--------------+--------------------------------+---------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| product_id | BIGINT NOT NULL |           [] |                             [] |  &lt;NULL&gt; |
</span></span></span><span class="line"><span class="cl"><span class="cm">|      price |             INT | [true,count] | [fields.price.ignore-retrac... |  &lt;NULL&gt; |
</span></span></span><span class="line"><span class="cl"><span class="cm">|      sales |          BIGINT |        [sum] | [fields.sales.aggregate-fun... |  &lt;NULL&gt; |
</span></span></span><span class="line"><span class="cl"><span class="cm">+------------+-----------------+--------------+--------------------------------+---------+
</span></span></span><span class="line"><span class="cl"><span class="cm">3 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="partitions-table">
  Partitions Table
  <a class="anchor" href="#partitions-table">#</a>
</h3>
<p>你可以查询表的分区文件信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$partitions</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+---------------+----------------+--------------------+--------------------+------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|  partition    |   record_count |  file_size_in_bytes|          file_count|        last_update_time|
</span></span></span><span class="line"><span class="cl"><span class="cm">+---------------+----------------+--------------------+--------------------+------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|  {1}          |           1    |             645    |                1   | 2024-06-24 10:25:57.400|
</span></span></span><span class="line"><span class="cl"><span class="cm">+---------------+----------------+--------------------+--------------------+------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="buckets-table">
  Buckets Table
  <a class="anchor" href="#buckets-table">#</a>
</h3>
<p>你可以查询表的桶文件信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$buckets</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+---------------+--------+----------------+--------------------+--------------------+------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|  partition    | bucket |   record_count |  file_size_in_bytes|          file_count|        last_update_time|
</span></span></span><span class="line"><span class="cl"><span class="cm">+---------------+--------+----------------+--------------------+--------------------+------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|  [1]          |   0    |           1    |             645    |                1   | 2024-06-24 10:25:57.400|
</span></span></span><span class="line"><span class="cl"><span class="cm">+---------------+--------+----------------+--------------------+--------------------+------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="statistic-table">
  Statistic Table
  <a class="anchor" href="#statistic-table">#</a>
</h3>
<p>你可以通过 statistic 表查询统计信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">T$statistics</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------+------------+-----------------------+------------------+----------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|  snapshot_id |  schema_id |     mergedRecordCount | mergedRecordSize |  colstat |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------+------------+-----------------------+------------------+----------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|            2 |          0 |              2        |         2        |    {}    |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------+------------+-----------------------+------------------+----------+
</span></span></span><span class="line"><span class="cl"><span class="cm">1 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="table-indexes-table">
  Table Indexes Table
  <a class="anchor" href="#table-indexes-table">#</a>
</h3>
<p>你可以通过 indexes 表查询为动态桶表（index_type = HASH）和删除向量（index_type = DELETION_VECTORS）生成的表索引文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_table$table_indexes</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+--------------------------------+--------------------------------+----------------------+----------------------+--------------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|                      partition |      bucket |                     index_type |                      file_name |            file_size |            row_count |                      dv_ranges |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+--------------------------------+--------------------------------+----------------------+----------------------+--------------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|                   {2024-10-01} |           0 |                           HASH | index-70abfebf-149e-4796-9f... |                   12 |                    3 |                         &lt;NULL&gt; |
</span></span></span><span class="line"><span class="cl"><span class="cm">|                   {2024-10-01} |           0 |               DELETION_VECTORS | index-633857e7-cdce-47d2-87... |                   33 |                    1 | [(data-346cb9c8-4032-4d66-a... |
</span></span></span><span class="line"><span class="cl"><span class="cm">+--------------------------------+-------------+--------------------------------+--------------------------------+----------------------+----------------------+--------------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">2 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h2 id="global-system-table">
  Global System Table
  <a class="anchor" href="#global-system-table">#</a>
</h2>
<p>全局系统表包含 Paimon 中所有表的统计信息。为了方便查询，我们创建了一个名为 <code>sys</code> 的引用系统数据库。<br>
我们可以通过 Flink SQL 显示所有全局系统表：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">USE</span><span class="w"> </span><span class="n">sys</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SHOW</span><span class="w"> </span><span class="n">TABLES</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h3 id="all-options-table">
  ALL Options Table
  <a class="anchor" href="#all-options-table">#</a>
</h3>
<p>该表类似于 <a href="#options-table">Options 表</a>，但它显示的是所有数据库中所有表的选项信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">sys</span><span class="p">.</span><span class="n">all_table_options</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+---------------+--------------------------------+--------------------------------+------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| database_name |                     table_name |                            key |            value |
</span></span></span><span class="line"><span class="cl"><span class="cm">+---------------+--------------------------------+--------------------------------+------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|         my_db |                    Orders_orc  |                         bucket |               -1 |
</span></span></span><span class="line"><span class="cl"><span class="cm">|         my_db |                        Orders2 |                         bucket |               -1 |
</span></span></span><span class="line"><span class="cl"><span class="cm">|         my_db |                        Orders2 |               sink.parallelism |                7 |
</span></span></span><span class="line"><span class="cl"><span class="cm">|         my_db2|                      OrdersSum |                         bucket |                1 |
</span></span></span><span class="line"><span class="cl"><span class="cm">+---------------+--------------------------------+--------------------------------+------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">7 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div><h3 id="catalog-options-table">
  Catalog Options Table
  <a class="anchor" href="#catalog-options-table">#</a>
</h3>
<p>你可以通过 catalog options 表查询 Catalog 的选项信息，未显示的选项为默认值。你可以参考 <a href="//localhost:1313/maintenance/configurations/#coreoptions">Configuration</a>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">sys</span><span class="p">.</span><span class="n">catalog_options</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">+-----------+---------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">|       key |                     value |
</span></span></span><span class="line"><span class="cl"><span class="cm">+-----------+---------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">| warehouse | hdfs:///path/to/warehouse |
</span></span></span><span class="line"><span class="cl"><span class="cm">+-----------+---------------------------+
</span></span></span><span class="line"><span class="cl"><span class="cm">1 rows in set
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span></code></pre></div></article>
 
      

      <footer class="book-footer">
        
  




<a href="//github.com/apache/paimon/edit/1.2/docs/content/concepts%5csystem-tables.md" style="color:black"><i class="fa fa-edit fa-fw"></i>Edit This Page</a>


 
        


<hr style="margin-top: 20px; border: 1px solid #e5e5e5;" />

<table style="border-spacing: 10px;">
    <tbody>
    <tr>
        <td colspan="2">
            Copyright &copy; 2025 The Apache Software Foundation. Apache Paimon, Paimon, and its feather logo are
            trademarks of The Apache Software Foundation.
        </td>
    </tr>
    </tbody>
</table>

      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  

<nav id="TableOfContents"><h3>On This Page <button class="toc" onclick="collapseToc()"><i class="fa fa-compress" aria-hidden="true"></i></button></h3>
  <ul>
    <li><a href="#data-system-table">Data System Table</a>
      <ul>
        <li><a href="#snapshots-table">Snapshots Table</a></li>
        <li><a href="#schemas-table">Schemas Table</a></li>
        <li><a href="#options-table">Options Table</a></li>
        <li><a href="#audit-log-table">Audit log Table</a></li>
        <li><a href="#binlog-table">Binlog Table</a></li>
        <li><a href="#read-optimized-table">Read-optimized Table</a></li>
        <li><a href="#files-table">Files Table</a></li>
        <li><a href="#tags-table">Tags Table</a></li>
        <li><a href="#branches-table">Branches Table</a></li>
        <li><a href="#consumers-table">Consumers Table</a></li>
        <li><a href="#manifests-table">Manifests Table</a></li>
        <li><a href="#aggregation-fields-table">Aggregation fields Table</a></li>
        <li><a href="#partitions-table">Partitions Table</a></li>
        <li><a href="#buckets-table">Buckets Table</a></li>
        <li><a href="#statistic-table">Statistic Table</a></li>
        <li><a href="#table-indexes-table">Table Indexes Table</a></li>
      </ul>
    </li>
    <li><a href="#global-system-table">Global System Table</a>
      <ul>
        <li><a href="#all-options-table">ALL Options Table</a></li>
        <li><a href="#catalog-options-table">Catalog Options Table</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    <aside class="expand-toc">
      <button class="toc" onclick="expandToc()">
        <i class="fa fa-expand" aria-hidden="true"></i>
      </button>
    </aside>
    
  </main>

  
</body>

</html>












